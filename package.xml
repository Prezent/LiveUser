<?xml version="1.0" encoding="UTF-8"?>
<package packagerversion="1.7.0RC2" version="2.0" xmlns="http://pear.php.net/dtd/package-2.0" xmlns:tasks="http://pear.php.net/dtd/tasks-1.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://pear.php.net/dtd/tasks-1.0
http://pear.php.net/dtd/tasks-1.0.xsd
http://pear.php.net/dtd/package-2.0
http://pear.php.net/dtd/package-2.0.xsd">
 <name>LiveUser</name>
 <channel>pear.php.net</channel>
 <summary>User authentication and permission management framework</summary>
 <description>LiveUser is a set of classes for dealing with user authentication
  and permission management. Basically, there are three main elements that
  make up this package:

  * The LiveUser class
  * The Auth containers
  * The Perm containers

  The LiveUser class takes care of the login process and can be configured
  to use a certain permission container and one or more different auth containers.
  That means, you can have your users&apos; data scattered amongst many data containers
  and have the LiveUser class try each defined container until the user is found.
  For example, you can have all website users who can apply for a new account online
  on the webserver&apos;s local database. Also, you want to enable all your company&apos;s
  employees to login to the site without the need to create new accounts for all of
  them. To achieve that, a second container can be defined to be used by the LiveUser class.

  You can also define a permission container of your choice that will manage the rights for
  each user. Depending on the container, you can implement any kind of permission schemes
  for your application while having one consistent API.

  Using different permission and auth containers, it&apos;s easily possible to integrate
  newly written applications with older ones that have their own ways of storing permissions
  and user data. Just make a new container type and you&apos;re ready to go!

  Currently available are containers using:
  PEAR::DB, PEAR::MDB, PEAR::MDB2, PECL::PDO, PEAR::XML_Tree, PEAR::Auth, Session.
 
 </description>
 <lead>
  <name>Markus Wolff</name>
  <user>mw21st</user>
  <email>mw21st@php.net</email>
  <active>no</active>
 </lead>
 <lead>
  <name>Arnaud Limbourg</name>
  <user>arnaud</user>
  <email>arnaud@php.net</email>
  <active>yes</active>
 </lead>
 <lead>
  <name>Lukas Kahwe Smith</name>
  <user>lsmith</user>
  <email>smith@pooteeweet.org</email>
  <active>no</active>
 </lead>
 <lead>
  <name>Helgi &amp;#222;ormar</name>
  <user>dufuz</user>
  <email>dufuz@php.net</email>
  <active>yes</active>
 </lead>
 <developer>
  <name>Bjoern Kraus</name>
  <user>krausbn</user>
  <email>krausbn@php.net</email>
  <active>no</active>
 </developer>
 <developer>
  <name>Matthias Nothhaft</name>
  <user>mahono</user>
  <email>mahono@php.net</email>
  <active>yes</active>
 </developer>
 <date>2008-01-28</date>
 <time>08:08:25</time>
 <version>
  <release>0.17</release>
  <api>0.16.12</api>
 </version>
 <stability>
  <release>beta</release>
  <api>beta</api>
 </stability>
 <license uri="http://www.gnu.org/copyleft/lesser.html">LGPL</license>
 <notes>
 </notes>
 <contents>
  <dir name="/">
   <dir name="Auth">
    <dir name="Storage">
     <file baseinstalldir="/LiveUser" name="Globals.php" role="php" />
    </dir> <!-- /Auth/Storage -->
    <file baseinstalldir="/LiveUser" name="Common.php" role="php" />
    <file baseinstalldir="/LiveUser" name="DB.php" role="php" />
    <file baseinstalldir="/LiveUser" name="MDB.php" role="php" />
    <file baseinstalldir="/LiveUser" name="MDB2.php" role="php" />
    <file baseinstalldir="/LiveUser" name="PDO.php" role="php" />
    <file baseinstalldir="/LiveUser" name="PEARAuth.php" role="php" />
    <file baseinstalldir="/LiveUser" name="Session.php" role="php" />
    <file baseinstalldir="/LiveUser" name="XML.php" role="php" />
   </dir> <!-- /Auth -->
   <dir name="docs">
    <dir name="examples">
     <dir name="example1">
      <file baseinstalldir="/LiveUser" name="Auth_XML.xml" role="doc" />
      <file baseinstalldir="/LiveUser" name="conf.php" role="doc" />
      <file baseinstalldir="/LiveUser" name="example.php" role="doc" />
      <file baseinstalldir="/LiveUser" name="index.html" role="doc" />
      <file baseinstalldir="/LiveUser" name="README" role="doc" />
     </dir> <!-- /docs/examples/example1 -->
     <dir name="example2">
      <file baseinstalldir="/LiveUser" name="Auth_XML.xml" role="doc" />
      <file baseinstalldir="/LiveUser" name="conf.php" role="doc" />
      <file baseinstalldir="/LiveUser" name="example.php" role="doc" />
      <file baseinstalldir="/LiveUser" name="index.html" role="doc" />
      <file baseinstalldir="/LiveUser" name="Perm_XML.xml" role="doc" />
      <file baseinstalldir="/LiveUser" name="README" role="doc" />
     </dir> <!-- /docs/examples/example2 -->
     <dir name="example4">
      <file baseinstalldir="/LiveUser" name="Auth_XML.xml" role="doc" />
      <file baseinstalldir="/LiveUser" name="conf.php" role="doc" />
      <file baseinstalldir="/LiveUser" name="demodata.xml" role="doc" />
      <file baseinstalldir="/LiveUser" name="error-page.tpl.php" role="doc" />
      <file baseinstalldir="/LiveUser" name="finish.inc.php" role="doc" />
      <file baseinstalldir="/LiveUser" name="functions.js" role="doc" />
      <file baseinstalldir="/LiveUser" name="index.html" role="doc" />
      <file baseinstalldir="/LiveUser" name="loginform.tpl.php" role="doc" />
      <file baseinstalldir="/LiveUser" name="news_change.php" role="doc" />
      <file baseinstalldir="/LiveUser" name="news_change.tpl.php" role="doc" />
      <file baseinstalldir="/LiveUser" name="news_new.php" role="doc" />
      <file baseinstalldir="/LiveUser" name="news_new.tpl.php" role="doc" />
      <file baseinstalldir="/LiveUser" name="news_notallowed.tpl.php" role="doc" />
      <file baseinstalldir="/LiveUser" name="news_view.php" role="doc" />
      <file baseinstalldir="/LiveUser" name="news_view.tpl.php" role="doc" />
      <file baseinstalldir="/LiveUser" name="style.css" role="doc" />
     </dir> <!-- /docs/examples/example4 -->
     <dir name="example5">
      <file baseinstalldir="/LiveUser" name="admin.php" role="doc" />
      <file baseinstalldir="/LiveUser" name="admin.tpl" role="doc" />
      <file baseinstalldir="/LiveUser" name="conf.php" role="doc" />
      <file baseinstalldir="/LiveUser" name="conf_pdo.php" role="doc" />
      <file baseinstalldir="/LiveUser" name="createlu.php" role="doc" />
      <file baseinstalldir="/LiveUser" name="demodata.xml" role="doc" />
      <file baseinstalldir="/LiveUser" name="home.php" role="doc" />
      <file baseinstalldir="/LiveUser" name="home.tpl" role="doc" />
      <file baseinstalldir="/LiveUser" name="index.php" role="doc" />
      <file baseinstalldir="/LiveUser" name="layout_frontend.css" role="doc" />
      <file baseinstalldir="/LiveUser" name="liveuser_rights.php" role="doc" />
      <file baseinstalldir="/LiveUser" name="login_form.tpl" role="doc" />
      <file baseinstalldir="/LiveUser" name="news.tpl" role="doc" />
      <file baseinstalldir="/LiveUser" name="news_edit.tpl" role="doc" />
      <file baseinstalldir="/LiveUser" name="news_list.tpl" role="doc" />
     </dir> <!-- /docs/examples/example5 -->
     <file baseinstalldir="/LiveUser" name="demodata.php" role="doc" />
     <file baseinstalldir="/LiveUser" name="README" role="doc" />
    </dir> <!-- /docs/examples -->
   </dir> <!-- /docs -->
   <dir name="Perm">
    <dir name="Storage">
     <file baseinstalldir="/LiveUser" name="DB.php" role="php" />
     <file baseinstalldir="/LiveUser" name="Globals.php" role="php" />
     <file baseinstalldir="/LiveUser" name="MDB.php" role="php" />
     <file baseinstalldir="/LiveUser" name="MDB2.php" role="php" />
     <file baseinstalldir="/LiveUser" name="PDO.php" role="php" />
     <file baseinstalldir="/LiveUser" name="SQL.php" role="php" />
     <file baseinstalldir="/LiveUser" name="XML.php" role="php" />
    </dir> <!-- /Perm/Storage -->
    <file baseinstalldir="/LiveUser" name="Complex.php" role="php" />
    <file baseinstalldir="/LiveUser" name="Medium.php" role="php" />
    <file baseinstalldir="/LiveUser" name="Simple.php" role="php" />
    <file baseinstalldir="/LiveUser" name="Storage.php" role="php" />
   </dir> <!-- /Perm -->
   <dir name="sql">
    <file baseinstalldir="/LiveUser" name="Auth_XML.xml" role="data" />
    <file baseinstalldir="/LiveUser" name="install.php" role="data" />
    <file baseinstalldir="/LiveUser" name="Perm_XML.xml" role="data" />
    <file baseinstalldir="/LiveUser" name="README" role="data" />
   </dir> <!-- /sql -->
   <file baseinstalldir="/LiveUser" name="lgpl.txt" role="doc" />
   <file baseinstalldir="/" name="LiveUser.php" role="php" />
  </dir> <!-- / -->
 </contents>
 <dependencies>
  <required>
   <php>
    <min>4.2.0</min>
   </php>
   <pearinstaller>
    <min>1.4.0b1</min>
   </pearinstaller>
   <package>
    <name>PEAR</name>
    <channel>pear.php.net</channel>
    <min>1.3.3</min>
   </package>
   <package>
    <name>Event_Dispatcher</name>
    <channel>pear.php.net</channel>
   </package>
  </required>
  <optional>
   <package>
    <name>Log</name>
    <channel>pear.php.net</channel>
    <min>1.7.0</min>
   </package>
   <package>
    <name>DB</name>
    <channel>pear.php.net</channel>
    <min>1.6.0</min>
   </package>
   <package>
    <name>MDB</name>
    <channel>pear.php.net</channel>
    <min>1.1.4</min>
   </package>
   <package>
    <name>MDB2</name>
    <channel>pear.php.net</channel>
    <min>2.0.0</min>
   </package>
   <package>
    <name>MDB2_Schema</name>
    <channel>pear.php.net</channel>
   </package>
   <package>
    <name>XML_Tree</name>
    <channel>pear.php.net</channel>
   </package>
   <package>
    <name>Crypt_RC4</name>
    <channel>pear.php.net</channel>
   </package>
   <extension>
    <name>mcrypt</name>
   </extension>
   <extension>
    <name>hash</name>
   </extension>
  </optional>
 </dependencies>
 <phprelease>
  <filelist>
   <install as="misc/Auth_XML.xml" name="sql/Auth_XML.xml" />
   <install as="misc/schema/install.php" name="sql/install.php" />
   <install as="misc/Perm_XML.xml" name="sql/Perm_XML.xml" />
   <install as="misc/schema/README" name="sql/README" />
  </filelist>
 </phprelease>
 <changelog>
  <release>
   <version>
    <release>1.16.12</release>
    <api>1.16.12</api>
   </version>
   <stability>
    <release>beta</release>
    <api>beta</api>
   </stability>
   <date>2006-08-22</date>
   <license uri="http://www.gnu.org/copyleft/lesser.html">LGPL</license>
   <notes>- wrong use of pdo fetch method, when no result could be fetched it returns
  false with no error. Swith to using fetchAll and check for an empty array
- we cannot decrypt most of the encryption method used by the hash extension so
  we default to returning the unmodified string
- the wrong variable was used to report the type of permission container when an
  error occured
- push an error on the stack when the encryption method cannot be found
- make sequence columns primary key
- properly disconnect the pdo object
- make it possible to set the status message mapping
- register options for create (Bug #7704)
- use the hash extension if it is present for the password encryption
- refactored decryptPW() and encryptPW() into static methods in the LiveUser class
- force null instead of false for PDO fetch() calls that return empty sets
- fixed logging into example1
- debug =&gt; false in conf doesn&apos;t work (Bug #7564; thx to Matthias)
- added support for user defined handle fields
  in DB, MDB, MDB2 and PDO containers you can set a list of fields in your auth
  container storage config, default is &apos;handle&apos;, example:
  &apos;handles&apos; =&gt; array(&apos;handle&apos;, &apos;auth_user_id&apos;, &apos;email&apos;)
  these fields are now used to find the right user on login (Request #7781)
- fixed LiveUser::decryptPW(): added missing third parameter &apos;secret&apos;
- check if safe_mode is enabled in fileExists() to determine what algo to use (Bug #8296)
    
   </notes>
  </release>
  <release>
   <version>
    <release>0.16.12</release>
    <api>0.16.12</api>
   </version>
   <stability>
    <release>beta</release>
    <api>beta</api>
   </stability>
   <date>2006-08-22</date>
   <license uri="http://www.gnu.org/copyleft/lesser.html">LGPL</license>
   <notes>- wrong use of pdo fetch method, when no result could be fetched it returns
  false with no error. Swith to using fetchAll and check for an empty array
- we cannot decrypt most of the encryption method used by the hash extension so
  we default to returning the unmodified string
- the wrong variable was used to report the type of permission container when an
  error occured
- push an error on the stack when the encryption method cannot be found
- make sequence columns primary key
- properly disconnect the pdo object
- make it possible to set the status message mapping
- register options for create (Bug #7704)
- use the hash extension if it is present for the password encryption
- refactored decryptPW() and encryptPW() into static methods in the LiveUser class
- force null instead of false for PDO fetch() calls that return empty sets
- fixed logging into example1
- debug =&gt; false in conf doesn&apos;t work (Bug #7564; thx to Matthias)
- added support for user defined handle fields
  in DB, MDB, MDB2 and PDO containers you can set a list of fields in your auth
  container storage config, default is &apos;handle&apos;, example:
  &apos;handles&apos; =&gt; array(&apos;handle&apos;, &apos;auth_user_id&apos;, &apos;email&apos;)
  these fields are now used to find the right user on login (Request #7781)
- fixed LiveUser::decryptPW(): added missing third parameter &apos;secret&apos;
- check if safe_mode is enabled in fileExists() to determine what algo to use (Bug #8296)
    
   </notes>
  </release>
  <release>
   <version>
    <release>0.16.11</release>
    <api>0.16.11</api>
   </version>
   <stability>
    <release>beta</release>
    <api>beta</api>
   </stability>
   <date>2006-04-19</date>
   <license uri="http://www.gnu.org/copyleft/lesser.html">LGPL</license>
   <notes>- parse error typo fix in PEARAuth container (bug #6968)
- minor improvements to the phpdoc comments in PEARAuth container
- use ugly fopen() hack in fileExists()
  http://marc.theaimsgroup.com/?l=pear-dev&amp;m=114148949106207&amp;w=2
- changed API for readuserData(), auth_user_id parameter now contains the
  auth_user_id to use
- login() now supports passing in an auth_user_id instead of the handle/password
- made stack property public
- typo fix in PDO container readImplyingRights() method (bug #7195)
- expanded error handling in Log instance creation
- handle if no proper credentials where passed to readUserData() (bug #7262)
- replace isset() with array_key_exists() where applicable
- disable __autoload() in class_exists() calls (bug #7304)
- brought property names in line s/rights/right_ids *BC break*
- MDB2_Schema 0.5 and MDB2 2.0.1 handles nulls in schema files properly so
  there is no need to disable MDB2_PORTABILITY_EMPTY_TO_NULL in the installer
    
   </notes>
  </release>
  <release>
   <version>
    <release>0.16.10</release>
    <api>0.16.10</api>
   </version>
   <stability>
    <release>beta</release>
    <api>beta</api>
   </stability>
   <date>2006-02-27</date>
   <license uri="http://www.gnu.org/copyleft/lesser.html">LGPL</license>
   <notes>- Do not include Cache.php since its only a concept and not implemented yet
- fixed serious issue with right reading in the Medium and Complex container
- right_level may not be null in schema (use default if not explicitly set)
- phpdoc improvements
- bumped dependency for MDB2 to first stable release
- added missing optional dependency on mcrypt
- made admin user a superadmin in example4
- bumped copyright to 2006
    
   </notes>
  </release>
  <release>
   <version>
    <release>0.16.9</release>
    <api>0.16.9</api>
   </version>
   <stability>
    <release>beta</release>
    <api>beta</api>
   </stability>
   <date>2006-02-21</date>
   <license uri="http://www.gnu.org/copyleft/lesser.html">LGPL</license>
   <notes>This releases fixes a minor security issue that is limited to the optional
remember me feature. This issue was report to us by GulfTech Security Research.

The issue would allow an attacker to determine the existance of files inside the
file system, as well as being able to delete files:
- if the relativ path is shorter than 32 characters (including a null
byte)
- if null bytes are handled inside the &quot;_COOKIE&quot; superglobal, for example
through usage of magic_quotes_gpc, the issue becomes essentially limited to
files ending with &quot;.lu&quot;.

All installations using the remember me feature are strongly urged to update.
This release also changes some other aspects including a BC break so developers
can optionally patch their current installations from the changes in the
following commit:
http://cvs.php.net/viewcvs.cgi/pear/LiveUser/LiveUser.php?r1=1.148&amp;r2=1.149&amp;diff_format=u

- fixed major bug in PEARAuth container: auth_user_id is not an optional property
- added passwordEncryptionMode and secret to phpdoc comment
- made cryptRC4() method public to match usage in auth common in the client and admin api
- fixed handling of the secret user defineable property (bug #6551)
- added support for user_group_ids (bug #6517)
- allow grouprights and groupusers table to join eachother
- updateProperty doesn&apos;t update the session (bug #6612)
- renamed &quot;connection&quot; config option to &quot;dbc&quot; *BC BREAK*
- cleaned up and unified init() in the storage classes
- added example for dumping SQL to a file to installer
- add support for force_seq to installer
- removed allowDuplicateHandles and allowEmptyPasswords options, they are now
  handled through the table definition in the given Globals.php (overwriteable
  via the config array) *BC BREAK*
- initial untested support for PDO in the installer
- added examples for setting length and defaults to installer
- use overwrite when unlink is enabled in the installer
- reworked handling of merging user with group rights *BC BREAK*
When using the Medium or Complex container a user may gain rights through direct
assignment or through membership in a group that has rights assigned. The user
and group rights are merged with the following logic:
* if the right is only assigned to a member group but not the user the right is
  available to the user at the level at which the group has the right
* if the right is only assigned to the user at a level greater than zero but not
  to a member group the right is available to the user at the level at which
  user has the right
* if the right is only assigned to the user at a level equal to zero but not
  to a member group the right is available to the user at the level at which
  user has the right
* if the right is only assigned to the user at a level lower than zero but not
  to a member group then the right is unavailable to the user
* if the is assigned to a member group and the user and the level at which the
  user has the right is greater than zero, then the right is available to the
  user at higher level of the two
* if the is assigned to a member group and the user and the level at which the
  user has the right is equal to zero, then the right is unavailable to the user
* if the is assigned to a member group and the user and the level at which the
  user has the right is lower than zero, then the right is available to the
  user at the minimum of the group assigned level and the addition of the
  negativ user level and the maximum level
Example:
The user as the following right_id =&gt; level pairs
array
  1 =&gt; 3
  2 =&gt; -2
  3 =&gt; 0
  5 =&gt; -1

The groups he is a member of have the following right_id =&gt; level pairs
array
  1 =&gt; 1
  2 =&gt; 3
  3 =&gt; 3
  4 =&gt; 2

The final right_id =&gt; level pairs are as follows
array
  1 =&gt; 3 // user has a higher level (3) than the group level (1)
  2 =&gt; 1 // 3 - 2 means a maximum possible level of 1
  4 =&gt; 2 // only group has the right at level 2
  5 =&gt; 2 // only user has the right at level 3 - 1 = 2
    
   </notes>
  </release>
  <release>
   <version>
    <release>0.16.8</release>
    <api>0.16.8</api>
   </version>
   <stability>
    <release>beta</release>
    <api>beta</api>
   </stability>
   <date>2005-12-21</date>
   <license uri="http://www.gnu.org/copyleft/lesser.html">LGPL</license>
   <notes>- clearer status and error messages
- fix a bug with the passed Log object being discarded
- extra debug info when the auth container is instantiated
- more helpful error message when the class cannot be loaded
- make the PEAR::Auth wrapper use the passed handle and password
- fixed phpdoc typo in singleton method (bug #5668)
- fixed ability to call singleton() with only the conf parameter set, even if
  singleton was never called before (bug #5669)
- fixed issue in factoryStorage() that would lead to modifying the config array (bug #5526)
- added ability to disable executing the sql commands on installSchema()
- set status after logging out not before
- tweaked error messages for failed factory method calls
- fix for calling singleton without a signature string (bug #5905)
- attempt at checking if it is safe to start the session, add an error to the stack if not and return
- minor performance tweak in login()
- reordered code inside login() to make onFailedMapping events more powerful
- improved handling of INACTIVE status
- stop using backendArrayIndex infavor of containerName property in the auth instance
- removed loginTimeout feature (disable lastlogin if you are concerned about
  the cost of updating the lastlogin time)
- handle option user data properties in readUserData() in the PEAR::Auth wrapper
- added a few return true&apos;s for method that returned void so far
- tons of phpdoc and whitespace fixes and additions
- add missing css file in example5
- only read remember me cookie in login() if remember was passed as true (bug #6215)
- handle and password are passed to reeadUserData in the PEARAuth container
- reworked file loading in loadClass() to work around issues in safe_mode with
  LiveUser::fileExists() (bug #6226)
- moved all explict handling of logout() and login() out of the init() method *BC BREAK*
- made setRememberCookie(), readRememberCookie() and deleteRememberCookie public
- setRememberCookie() no longer accepts a remember parameter
- added PDO backend and optional pdo based config for example5
    
   </notes>
  </release>
 </changelog>
</package>
